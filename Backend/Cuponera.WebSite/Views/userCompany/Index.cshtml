@model IEnumerable<Cuponera.Entities.userCompany>

@{
    ViewBag.Title = "Usuarios";
}

<h2>Usuarios</h2>

<script type="text/javascript">
    var globals = {
        controller: 'userCompany',
        filters: {
            custom: [{
                controlType: 'select',
                controlId: 'company',
                controlDefaultValue: '@(Request.Params["company"] != null ? @Request.Params["company"] : "")',
                label: 'Empresa',
                visible: @(ViewBag.CanSelectCompany != null && ViewBag.CanSelectCompany ? "true" : "false"),
                source: {
                    include_all: true,
                    controller: 'company',
                    action: 'GetAllBasicData'
                }
            }]
        }
    };

    $(document).ready(function () {
        $('#company').width(10);
        $('#item-name').width(10);
        $('.filters').width(250)
    });

</script>

@Html.Partial("AntiForgeryTokenForm")
@Html.Partial("Filters")


@if (Model.Count() == 0)
{
    <div class="no-data">No hay datos.</div>
}
else
{
    <div class="table-all">
        <table class="table">
            <tr>
                <th>
                    Admin
                </th>
                <th>
                    Compañia
                </th>
                <th>
                    Sucursal
                </th>
                <th>
                    Usuario
                </th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.IsAdmin)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.company.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.store.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.UserProfile.UserName)
                    </td>
                    <td class="operation first">
                        @Html.ActionLink("Detalle", "Details", new { id = item.IdUserCompany }, new { @class = "detailsIcon", title = "Detalle" })
                    </td>
                    <td class="operation">
                        @Html.ActionLink("Editar", "Edit", new { id = item.IdUserCompany }, new { @class = "editIcon", title = "Editar" })
                    </td>
                    <td class="operation">
                        <a href="#" class="removeIcon" title="Eliminar" data-popup-to-open="dialog-confirm-deactivate">Eliminar</a>
                    </td>

                </tr>
            }

        </table>
        @Html.Partial("Paginator")
    </div>



<div style="clear:both;"></div>
}

<p>
    @Html.ActionLink("Nuevo", "Create")
</p>